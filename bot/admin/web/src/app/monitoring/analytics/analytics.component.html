<div class="content">
  <nb-card>
    <nb-card-header style=" z-index: 1000;display: inline;padding-bottom: 0;">
      <nb-card style="position: absolute;z-index: 1000;">
        <date-range-calendar [rangeInDays]="90" (datesChanged)="datesChanged($event)"></date-range-calendar>
      </nb-card>
      <button nbButton outline shape="round" (click)="onExportClick()" nbTooltip="Export" status="primary" style="float: right">
        <nb-icon icon="upload"></nb-icon>
      </button>
    </nb-card-header>
    <nb-card-body [nbSpinner]="loadingUsers" nbSpinnerStatus="primary" id="element-id">
      <nb-card>
        <nb-card-header>
          Users activity
          <nb-icon icon="question-mark-circle"
                   nbTooltip="The number of unique users according to their last interaction with the bot
               during the given time period across different connectors">
          </nb-icon>
        </nb-card-header>
        <nb-card-body *ngIf="usersChart!=null">
          <div style="text-align: center;" >
            <span *ngFor="let connector of connectors; index as i;" style="margin-right: 10px">
              <img *ngIf="getConnector(connector)"
                   src="{{getConnector(connector).iconUrl()}}"
                   class="connector"
                   [nbTooltip]="getConnector(connector).label()" [alt]="connector"/>
              <b>{{globalUsersCount[i]}}</b>
            </span>
          </div>
          <div style="text-align: center;">
            <google-chart #chart
                          [title]="usersChart.title"
                          [type]="usersChart.type"
                          [data]="usersChart.data"
                          [columns]="usersChart.columnNames"
                          [options]="usersChart.options"
                          [width]="usersChart.width"
                          [height]="usersChart.height">
            </google-chart>
          </div>
        </nb-card-body>
      </nb-card>

      <nb-card>
        <nb-card-header>
          Messages
          <nb-icon icon="question-mark-circle"
                   nbTooltip="The number of messages sent to the bot during the given time period across the different connectors">
          </nb-icon>
        </nb-card-header>
        <nb-card-body *ngIf="messagesChart!=null">
          <div style="text-align: center;">
            <span *ngFor="let connector of connectors; index as i;" style="margin-right: 10px">
              <img *ngIf="getConnector(connector)"
                   src="{{getConnector(connector).iconUrl()}}"
                   class="connector"
                   [nbTooltip]="getConnector(connector).label()" [alt]="connector"/>
              <b>{{globalMessagesCount[i]}}</b>
            </span>
          </div>
          <div style="text-align: center;">
            <google-chart
                          [title]="messagesChart.title"
                          [type]="messagesChart.type"
                          [data]="messagesChart.data"
                          [columns]="messagesChart.columnNames"
                          [options]="messagesChart.options"
                          [width]="messagesChart.width"
                          [height]="messagesChart.height">
            </google-chart>
          </div>
        </nb-card-body>
      </nb-card>

    </nb-card-body>
  </nb-card>
</div>
